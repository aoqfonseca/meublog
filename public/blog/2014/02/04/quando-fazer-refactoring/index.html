
<!DOCTYPE html>
<!--[if IEMobile 7 ]><html class="no-js iem7"><![endif]-->
<!--[if lt IE 9]><html class="no-js lte-ie8"><![endif]-->
<!--[if (gt IE 8)|(gt IEMobile 7)|!(IEMobile)|!(IE)]><!--><html class="no-js" lang="en"><!--<![endif]-->
<head>
  <meta charset="utf-8">
  <title>Quando Fazer Refactoring - Andre Fonseca</title>
  <meta name="author" content="Andre Fonseca">

  
  <meta name="description" content="TL; DR;
Sempre que falo sobre refactoring, sempre ouço a pergunta de quando fazer e como alocar tempo para realizá-lo. Para mim não existe um quando &hellip;">
  

  <!-- http://t.co/dKP3o1e -->
  <meta name="HandheldFriendly" content="True">
  <meta name="MobileOptimized" content="320">
  <meta name="viewport" content="width=device-width, initial-scale=1">

  
  <link rel="canonical" href="http://andrefonseca.net/blog/2014/02/04/quando-fazer-refactoring">
  <link href="/favicon.png" rel="icon">
  <link href="/stylesheets/screen.css" media="screen, projection" rel="stylesheet" type="text/css">
  <link href="/atom.xml" rel="alternate" title="Andre Fonseca" type="application/atom+xml">
  <script src="/javascripts/modernizr-2.0.js"></script>
  <script src="//ajax.googleapis.com/ajax/libs/jquery/1.9.1/jquery.min.js"></script>
  <script>!window.jQuery && document.write(unescape('%3Cscript src="./javascripts/libs/jquery.min.js"%3E%3C/script%3E'))</script>
  <script src="/javascripts/octopress.js" type="text/javascript"></script>
  
  
  <script type="text/javascript">
    var _gaq = _gaq || [];
    _gaq.push(['_setAccount', 'UA-34644487-1']);
    _gaq.push(['_trackPageview']);

    (function() {
      var ga = document.createElement('script'); ga.type = 'text/javascript'; ga.async = true;
      ga.src = ('https:' == document.location.protocol ? 'https://ssl' : 'http://www') + '.google-analytics.com/ga.js';
      var s = document.getElementsByTagName('script')[0]; s.parentNode.insertBefore(ga, s);
    })();
  </script>


</head>

<body   >
  <header role="banner">
</header>
  <nav role="navigation"><ul class="subscription" data-subscription="rss">
  <li><a href="/atom.xml" rel="subscribe-rss" title="subscribe via RSS">RSS</a></li>
  
</ul>
  
<form action="http://google.com/search" method="get">
  <fieldset role="search">
    <input type="hidden" name="q" value="site:andrefonseca.net" />
    <input class="search" type="text" name="q" results="0" placeholder="Search"/>
  </fieldset>
</form>
  
<ul>
	<li><a href="/">Blog</a></li>
	<li><a href="/about">About</a></li>
	<li><a href="/portfolio">Portfolio</a></li>
	<li><a href="/archives">Archive</a></li>
</ul>

</nav>
  <div id="main">
    <div id="content">
      <div>
<article class="hentry" role="article">
  
  <header>
    
      <h1 class="entry-title">Quando Fazer Refactoring</h1>
    
    
      <p class="meta">
        








  


<time datetime="2014-02-04T16:59:00-02:00" pubdate data-updated="true">Feb 4<span>th</span>, 2014</time>
        
           | <a href="#disqus_thread"
             data-disqus-identifier="http://andrefonseca.net">Comments</a>
        
      </p>
    
  </header>


<div class="entry-content"><p>TL; DR;
Sempre que falo sobre refactoring, sempre ouço a pergunta de quando fazer e como alocar tempo para realizá-lo.</p>

<p>Para mim não existe um quando e nem quantidade de tempo para refactoring: sempre é momento de fazê-lo. Se simplesmente o refactoring não for considerado, mesmo que tenha a melhor estrutura e arquitetura, seu sistema irá ficar obsoleto e se tornará um grande legado. Fazer refactoring é um dos pilares para mantermos a qualidade da base de código.</p>

<h2>REFACTORING</h2>

<p><a href="http://martinfowler.com/">Martin Fowler</a> em seu livro <a href="http://www.amazon.com/Refactoring-Improving-Design-Existing-Code/dp/0201485672">Refactoring</a>, define como sendo a prática de melhorar o código em busca de maior clareza, melhor estrutura para extensão, maior comunicação, etc &hellip; sem alterar o comportamento.</p>

<p>Refactoring é a técnica para manter o seu código atual, sem duplcidades (DRY), seguindo boas práticas e princípios como o <a href="http://en.wikipedia.org/wiki/SOLID_(object-oriented_design">SOLID</a>).</p>

<p>Uma boa analogia é de sempre buscarmos a melhor forma de resolver o mesmo problema, tendo em vista a clareza, a boa comunicação, facilidade de extensão. Note aqui que não falei de perfomance.</p>

<h2>PORQUE REFACTORING</h2>

<p><a href="http://pt.wikipedia.org/wiki/Kent_Beck">Kent Back</a>, possui uma citação interessante que explica bem o porque:</p>

<p><em>Programs have two kinds of value: what they can do for you today and what they can do for you tomorrow. Most times when we are programming, we are focused on what we want the program to do today. Whether we are fixing a bug or adding a feature, we are making today&rsquo;s program more valuable by making it more capable.
You can&rsquo;t program long without realizing that what the system does today is only a part of the story. If you can get today&rsquo;s work done today, but you do it in such a way that you can&rsquo;t possibly get tomorrow&rsquo;s work done tomorrow, then you lose. Notice, though, that you know what you need to do today, but you&rsquo;re not quite sure about tomorrow. Maybe you&rsquo;ll do this, maybe that, maybe something you haven&rsquo;t imagined yet.
I know enough to do today&rsquo;s work. I don&rsquo;t know enough to do tomorrow&rsquo;s. But if I only work for today, I won&rsquo;t be able to work tomorrow at all.
Refactoring is one way out of the bind. When you find that yesterday&rsquo;s decision doesn&rsquo;t make sense today, you change the decision. Now you can do today&rsquo;s work. Tomorrow, some of your understanding as of today will seem naive, so you&rsquo;ll change that, too.
What is it that makes programs hard to work with? Four things I can think of as I am typing this are as follows:</em></p>

<p><em>1. Programs that are hard to read are hard to modify.</em></p>

<p><em>2. Programs that have duplicated logic are hard to modify.</em></p>

<p><em>3. Programs that require additional behavior that requires you to change running code are hard to modify.</em></p>

<p><em>4. Programs with complex conditional logic are hard to modify.</em></p>

<p><em>So, we want programs that are easy to read, that have all logic specified in one and only one place, that do not allow changes to endanger existing behavior, and that allow conditional logic to be expressed as simply as possible.</em>
<em>Refactoring is the process of taking a running program and adding to its value, not by changing its behavior but by giving it more of these qualities that enable us to continue developing at speed.</em></p>

<p>Transcrevendo, seria dizer que todos os sistemas possuem 2 valores: o que pode ser feito hoje e que pode ser feito amanhã.  Na maioria dos casos, sempre pensamos no presente. Porém, sistemas evoluem e novas funcionalidades, correções de bugs, vão ocorrendo e o código sendo alterado.  Nesses ciclos, acabamos duplicando código, adicionando responsabilidades a métodos, alterando as lógicas, etc. Com isso o código vai ficando confuso e complexo.</p>

<p>A técnica de Refactoring, é justamente olhar para esse sistema e buscar sempre um jeito melhor te atender os requisitos. Jeito esse que leva em conta coisas como comunicação, clareza, facilidade de extensão, e coisas simmilares.</p>

<p>Por isso, se quisermos manter um sistema com uma boa qualidade e simples de ser entendido e extendido, é muito importante sempre realizarmos refactorings.</p>

<h2>REFACTORING, TESTES AUTOMATIZADOS e TDD</h2>

<p>Não é meu objetivo entrar muito a fundo no assunto, entretanto, é importante dizer que é muito díficil fazer Refactoring em sistemas sem testes automatizados. Não é impossível. Mas extremamente difícil. Isso porque, ao final de um ciclo, você terá que testar se nenhum comportamento esperado foi alterado.</p>

<p>Por isso, de forma a simplificar, não fazemos refactoring sem testes. Caso o seu sistema não tenha testes, primeiro, faça o teste. Depois faça o Refactoring. Nisso podemos encaixar o TDD. O próprio trabalho de escrever os testes te ajudará a decidir o que mudar, a melhor forma, etc.</p>
</div>


  <footer>
    <p class="meta">
      
  

<span class="byline author vcard">Posted by <span class="fn">Andre Fonseca</span></span>

      








  


<time datetime="2014-02-04T16:59:00-02:00" pubdate data-updated="true">Feb 4<span>th</span>, 2014</time>
      


    </p>
    
      <div class="sharing">
  
  <a href="//twitter.com/share" class="twitter-share-button" data-url="http://andrefonseca.net/blog/2014/02/04/quando-fazer-refactoring/" data-via="aoqfonseca" data-counturl="http://andrefonseca.net/blog/2014/02/04/quando-fazer-refactoring/" >Tweet</a>
  
  
  
    <div class="fb-like" data-send="true" data-width="450" data-show-faces="false"></div>
  
</div>

    
    <p class="meta">
      
        <a class="basic-alignment left" href="/blog/2013/10/14/reinstalando-vim-com-python/" title="Previous Post: Reinstalando o vim na sua máquina com suporte a python e Ruby">&laquo; Reinstalando o vim na sua máquina com suporte a python e Ruby</a>
      
      
        <a class="basic-alignment right" href="/blog/2014/03/19/pesquisa-sobre-eventos-de-ti/" title="Next Post: Pesquisa sobre os eventos de TI">Pesquisa sobre os eventos de TI &raquo;</a>
      
    </p>
  </footer>
</article>

  <section>
    <h1>Comments</h1>
    <div id="disqus_thread" aria-live="polite"><noscript>Please enable JavaScript to view the <a href="http://disqus.com/?ref_noscript">comments powered by Disqus.</a></noscript>
</div>
  </section>

</div>

<aside class="sidebar">
  
    
  
</aside>


    </div>
  </div>
  <footer role="contentinfo">Copyright &copy; 2014

    Andre Fonseca

<br>
Powered by Octopress.

</footer>
  

<script type="text/javascript">
      var disqus_shortname = 'blogandrefonseca';
      
        
        // var disqus_developer = 1;
        var disqus_identifier = 'http://andrefonseca.net/blog/2014/02/04/quando-fazer-refactoring/';
        var disqus_url = 'http://andrefonseca.net/blog/2014/02/04/quando-fazer-refactoring/';
        var disqus_script = 'embed.js';
      
    (function () {
      var dsq = document.createElement('script'); dsq.type = 'text/javascript'; dsq.async = true;
      dsq.src = '//' + disqus_shortname + '.disqus.com/' + disqus_script;
      (document.getElementsByTagName('head')[0] || document.getElementsByTagName('body')[0]).appendChild(dsq);
    }());
</script>



<div id="fb-root"></div>
<script>(function(d, s, id) {
  var js, fjs = d.getElementsByTagName(s)[0];
  if (d.getElementById(id)) {return;}
  js = d.createElement(s); js.id = id; js.async = true;
  js.src = "//connect.facebook.net/en_US/all.js#appId=212934732101925&xfbml=1";
  fjs.parentNode.insertBefore(js, fjs);
}(document, 'script', 'facebook-jssdk'));</script>





  <script type="text/javascript">
    (function(){
      var twitterWidgets = document.createElement('script');
      twitterWidgets.type = 'text/javascript';
      twitterWidgets.async = true;
      twitterWidgets.src = '//platform.twitter.com/widgets.js';
      document.getElementsByTagName('head')[0].appendChild(twitterWidgets);
    })();
  </script>




</body>
</html>
